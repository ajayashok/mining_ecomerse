<!DOCTYPE html><html class=''>
<head>

    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->
    <link rel="stylesheet" type="text/css" href="/miningweb/css/login.css">
    <style class="cp-pen-styles">
        @import url(https://fonts.googleapis.com/css?family=Raleway:400,100,200,300);
    </style>
<script type="text/javascript">
 function load() {
    if (localStorage.getItem("loginData") === '') {
    }else{
      logData=JSON.parse(localStorage.getItem("loginData"));
      if(logData.type == 'owner'){
        window.location.href='order_list.html';
      }else{
        window.location.href='index.html';
      }
    }
  }
</script>
</head>


<body onload="load();">
    <!-- LOGIN MODULE -->
    <div class="login">
        <div class="wrap">
            <!-- TOGGLE -->
            <div id="toggle-wrap">
                <div id="toggle-terms">
                    <div id="cross">
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>


            <!-- SLIDER -->
            <div class="content">
                <!-- LOGO -->
                <div class="logo">
                    <a href="#"><img src="https://res.cloudinary.com/dpcloudinary/image/upload/v1506186248/logo.png" alt=""></a>
                </div>
                <!-- SLIDESHOW -->
                <div id="slideshow">
                    <div class="one">
                        <h2><span>SHOPPING</span></h2>
                        <p>Sign up to attend any of hundreds of events nationwide</p>
                    </div>
                </div>
            </div>
            <!-- LOGIN FORM -->
            <div class="user">
                <div class="form-wrap">
                    <!-- TABS -->
                    <div class="tabs">
                        <h3 class="login-tab"><a class="log-in active" href="#login-tab-content"><span>Login<span></a></h3>
                            <h3 class="signup-tab"><a class="sign-up" href="#signup-tab-content"><span>Sign Up</span></a></h3>
                        </div>
                        <!-- TABS CONTENT -->
                        <div class="tabs-content">
                            <!-- TABS CONTENT LOGIN -->
                            <div id="login-tab-content" class="active">
                                <form class="login-form" action="" method="post">
                                    <input type="text" class="input" id="uname" autocomplete="off" placeholder="Email or Username">
                                    <input type="password" class="input" id="passwd" autocomplete="off" placeholder="Password">
                                    <input type="button" class="button_login button" value="Login">
                                </form>

                            </div>
                            <!-- TABS CONTENT SIGNUP -->
                            <div id="signup-tab-content">
                                <form class="signup-form" id="signup-form" action="http://192.168.1.7:8000/signup" method="post">
                                    <div class="row">
                                        <div class="col-md-6">    
                                            <input type="text" tabindex="1" class="input" id="first_name" name="first_name" autocomplete="off" placeholder="first name" required="">
                                        </div>
                                        <div class="col-md-6">    
                                            <input type="text" class="input" tabindex="2" id="last_name" name="last_name" autocomplete="off" placeholder="last name" required="">
                                         </div>
                                        <div class="col-md-6"> 
                                            <input type="text" class="input" id="address_line1" name="line1" autocomplete="off" placeholder="address line 1" required="">
                                         </div>
                                          <div class="col-md-6">    
                                            <input type="text" class="input" id="address_line2" name="line2" autocomplete="off" placeholder="address line 2">
                                         </div>
                                         <div class="col-md-6">    
                                            <input type="email" class="input" id="email" name="email" autocomplete="off" placeholder="Email(Username)" required="">
                                         </div>
                                        <div class="col-md-6">    
                                            <input type="number" class="input" id="phone" name="phone" autocomplete="off" placeholder="Phone" required="">
                                        </div>

                                         <div class="col-md-6">    
                                            <input type="password" class="input" id="password" name="password" autocomplete="off" placeholder="Password" required="">
                                         </div>
                                         <div class="col-md-6">    
                                            <input type="password" class="input" id="user_pass_confirm" autocomplete="off" placeholder="Confirm Password" required="">
                                        </div>
                                        <div class="col-md-6">     
                                            <input type="number" class="input" id="mobile" name="mobile" autocomplete="off" placeholder="Mobile phone">
                                        </div>
                                        <div class="col-md-6">      
                                            <input type="submit" class="button" onclick="return validation()" value="Sign Up">
                                        </div>
                                    </div>
                                </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src='//production-assets.codepen.io/assets/common/stopExecutionOnTimeout-b2a7b3fe212eaa732349046d8416e00a9dec26eb7fd347590fbced3ab38af52e.js'></script><script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
        <script >

// LOGIN TABS
$(function() {
    var tab = $('.tabs h3 a');
    tab.on('click', function(event) {
        event.preventDefault();
        tab.removeClass('active');
        $(this).addClass('active');
        tab_content = $(this).attr('href');
        $('div[id$="tab-content"]').removeClass('active');
        $(tab_content).addClass('active');
    });
});

// CUSTOM JQUERY FUNCTION FOR SWAPPING CLASSES
(function($) {
    'use strict';
    $.fn.swapClass = function(remove, add) {
        this.removeClass(remove).addClass(add);
        return this;
    };
}(jQuery));


// // DISABLE SUBMIT FOR DEMO
function validation() {
    var f = document.getElementById('signup-form');
       
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("user_pass_confirm").value;
        if (password != confirmPassword) {
            alert("Passwords do not match.");
            return false;
        }else{
            if(f.checkValidity()) {
             f.submit();
         }
        }   
}
   $(document).on('click', '.button_login', function () {
      var name = $("#uname").val();
      var password =  $("#passwd").val();
      $.ajax({
          url: 'http://192.168.1.7:8000/login',
          type: 'POST',
          dataType: 'json',
          data: {username: name,password:password},
      })
      .done(function(response) {
         var myObj = response.success;
         if(myObj == "no"){
            alert('Login Failed');
         }else if(myObj == "ok"){
            localStorage.setItem('loginData',JSON.stringify(response));
            localStorage.setItem('cart',JSON.stringify(response.cart));
            if(response.type == "owner"){
                window.location.href="order_list.html";   
            }else if(response.type == "customer"){
                window.location.href="index.html"; 
            }
            
            
            console.log(response);
         }
         
      })
      .fail(function() {
          console.log("error");
      });

    });

</script>
</body></html>